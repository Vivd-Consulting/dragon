table:
  name: rules
  schema: accounting
object_relationships:
  - name: account
    using:
      foreign_key_constraint_on: account_id
  - name: category
    using:
      foreign_key_constraint_on: gic_id
array_relationships:
  - name: transactions
    using:
      foreign_key_constraint_on:
        column: applied_rule
        table:
          name: transactions
          schema: accounting
event_triggers:
  - name: new-rule
    definition:
      enable_manual: false
      insert:
        columns: '*'
    retry_conf:
      interval_sec: 10
      num_retries: 0
      timeout_sec: 60
    webhook: '{{ACTION_API}}/events/transactions/apply-rules'
    headers:
      - name: action-api
        value_from_env: ACTION_SECRET
